{"version":3,"sources":["components/ProductList.module.scss","components/useProductList.js","components/Header/Imgs/SearchLogo.svg","components/Header/Header.jsx","components/ProductCards/Imgs/Barley.svg","components/ProductCards/Imgs/Canola.svg","components/ProductCards/Imgs/Corn.svg","components/ProductCards/Imgs/Oats.svg","components/ProductCards/Imgs/Soybeans.svg","components/ProductCards/Imgs/Wheat.svg","components/ProductCards/ProductCards.jsx","components/Error/Error.jsx","components/Filters/imgs/FiltersLogo.svg","components/Filters/imgs/check.svg","components/Filters/Filters.jsx","components/ProductList.js","App.js","index.js"],"names":["module","exports","initialState","filter","isNew","isLimited","category","search","status","categoryStatus","items","categories","reducer","state","action","type","payload","Header","handler","className","src","logo","placeholder","onChange","ProductCards","logoDefiner","Barley","Canola","Corn","Oats","Soybeans","Wheat","length","map","item","width","categoryName","alt","name","description","price","discount","id","Error","onClick","Filters","clearHandler","isLimitedHandler","isNewHandler","it","find","disabled","htmlFor","check","checked","ProductList","useReducer","dispatch","updateFilter","useCallback","resetFilter","performRequest","retries","retryingFetch","url","fetch","then","res","ok","json","categoryId","join","serializeFilter","data","results","catch","useEffect","useProductList","e","target","value","styles","root","Object","values","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ed50523b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ProductList_root__ezjgF\"};","import { useCallback, useEffect, useReducer } from 'react'\n\nconst initialState = {\n  filter: {\n    isNew: false,\n    isLimited: false,\n    category: [],\n    search: '',\n  },\n  status: 'idle', // idle | work | success | error\n  categoryStatus: 'idle', // success | error\n  items: [],\n  categories: [],\n}\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'filter:change': {\n      return {\n        ...state,\n        status: 'work',\n        filter: {\n          ...state.filter,\n          ...action.payload,\n        },\n      }\n    }\n    case 'filter:reset': {\n      return {\n        ...state,\n        status: 'work',\n        filter: {\n          ...initialState.filter,\n        },\n      }\n    }\n    case 'request:start': {\n      return {\n        ...state,\n        status: 'work',\n      }\n    }\n    case 'request:success': {\n      return {\n        ...state,\n        status: 'success',\n        items: action.payload,\n      }\n    }\n    case 'request:error': {\n      return {\n        ...state,\n        status: 'error',\n      }\n    }\n    case 'cat-request:success': {\n      return {\n        ...state,\n        categoryStatus: 'success',\n        categories: action.payload,\n      }\n    }\n    case 'cat-request:error': {\n      return {\n        ...state,\n        categoryStatus: 'error',\n      }\n    }\n  }\n}\nexport const useProductList = () => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n  const updateFilter = useCallback((filter = {}) => dispatch({ type: 'filter:change', payload: filter }), [])\n  const resetFilter = useCallback(() => dispatch({ type: 'filter:reset' }), [])\n  const performRequest = useCallback(\n    (retries = 3) => {\n      dispatch({ type: 'request:start' })\n      const retryingFetch = url =>\n        fetch(url).then(res => {\n          if (res.ok) return res.json()\n          if (retries > 0) performRequest(retries - 1)\n          throw new Error(`Request failed with status code ${res.status}`)\n        })\n      // prettier-ignore\n      const serializeFilter = filter =>\n        [...filter.category.map(categoryId => `category[]=${categoryId}`), `isNew=${filter.isNew}`, `isLimited=${filter.isLimited}`, `search=${filter.search}`].join('&')\n      retryingFetch(`/api/product?${serializeFilter(state.filter)}`)\n        .then(data => dispatch({ type: 'request:success', payload: data.results }))\n        .catch(() => dispatch({ type: 'request:error' }))\n      retryingFetch('/api/category')\n        .then(data => dispatch({ type: 'cat-request:success', payload: data }))\n        .catch(() => dispatch({ type: 'cat-request:error' }))\n    },\n    [state.filter]\n  )\n\n  useEffect(() => {\n    performRequest()\n  }, [performRequest, state.filter.search])\n\n  return {\n    ...state,\n    updateFilter,\n    resetFilter,\n  }\n}\n","export default __webpack_public_path__ + \"static/media/SearchLogo.6ee5abe4.svg\";","import React from 'react'\r\nimport logo from './Imgs/SearchLogo.svg'\r\nimport './Header.css'\r\n\r\nfunction Header({ handler }) {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"logo\">Products</div>\r\n      <div className=\"search\">\r\n        <img className=\"search__logo\" src={logo} />\r\n        <input className=\"input\" type=\"text\" placeholder=\"Search among products\" onChange={handler} />\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","export default __webpack_public_path__ + \"static/media/Barley.d0752ec2.svg\";","export default __webpack_public_path__ + \"static/media/Canola.87d068d5.svg\";","export default __webpack_public_path__ + \"static/media/Corn.3131e41f.svg\";","export default __webpack_public_path__ + \"static/media/Oats.1549f433.svg\";","export default __webpack_public_path__ + \"static/media/Soybeans.cdfe6b75.svg\";","export default __webpack_public_path__ + \"static/media/Wheat.ba2ac08f.svg\";","import React from 'react'\r\nimport './ProductCards.css'\r\nimport Barley from './Imgs/Barley.svg'\r\nimport Canola from './Imgs/Canola.svg'\r\nimport Corn from './Imgs/Corn.svg'\r\nimport Oats from './Imgs/Oats.svg'\r\nimport Soybeans from './Imgs/Soybeans.svg'\r\nimport Wheat from './Imgs/Wheat.svg'\r\n\r\nfunction ProductCards({ items }) {\r\n  function logoDefiner(type) {\r\n    switch (type) {\r\n      case 'Barley':\r\n        return Barley\r\n      case 'Canola':\r\n        return Canola\r\n      case 'Corn':\r\n        return Corn\r\n      case 'Oats':\r\n        return Oats\r\n      case 'Soybeans':\r\n        return Soybeans\r\n      case 'Wheat':\r\n        return Wheat\r\n      default:\r\n        null\r\n    }\r\n  }\r\n  if (items.length === 0) return <div className=\"cards-container\">nothing was found for your search</div>\r\n  return (\r\n    <div className=\"cards-container\">\r\n      {items.map(item => (\r\n        <div className=\"card\" key={item.id}>\r\n          <img className=\"card__img\" width=\"116px\" src={logoDefiner(item.categoryName)} alt=\"product img\" />\r\n          <div className=\"card__info\">\r\n            <span className=\"category-name\">{item.categoryName}</span>\r\n            <span className=\"product-name\">{item.name}</span>\r\n            <span className=\"product-description\">{item.description}</span>\r\n            <div className=\"product-price\">\r\n              <span className=\"product-value\">${item.price}</span>\r\n              {item.discount && <span className=\"product-discount\">Discount ${item.discount} per bag</span>}\r\n            </div>\r\n            <div className=\"product-extras\">\r\n              {item.isLimited && <span className=\"product-limited\">Limited</span>}\r\n              {item.isNew && <span className=\"product-new\">New</span>}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductCards\r\n","import React from 'react'\r\nimport './Error.css'\r\n\r\nfunction Error({ handler }) {\r\n  return (\r\n    <div className=\"error\">\r\n      Something went wrong &nbsp;\r\n      <button className=\"error-button\" type=\"button\" onClick={handler}>\r\n        try again\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Error\r\n","export default __webpack_public_path__ + \"static/media/FiltersLogo.5067160f.svg\";","export default __webpack_public_path__ + \"static/media/check.ca86e428.svg\";","import React from 'react'\r\nimport './Filters.css'\r\nimport logo from './imgs/FiltersLogo.svg'\r\nimport check from './imgs/check.svg'\r\n\r\nfunction Filters({ clearHandler, handler, categories, isLimitedHandler, isNewHandler, items, filter }) {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"title\">\r\n        <img className=\"title__logo\" src={logo} />\r\n        <div className=\"title__text\">Filters</div>\r\n      </div>\r\n      <div className=\"options\">\r\n        <fieldset className=\"options__block\">\r\n          <legend className=\"legend\">Category</legend>\r\n          <button\r\n            className={filter.category.length === 0 ? 'button button--checked' : 'button'}\r\n            type=\"button\"\r\n            onClick={clearHandler}\r\n          >\r\n            All\r\n          </button>\r\n          {categories.map(it => {\r\n            return (\r\n              <button\r\n                className={filter.category.find(type => type === it.name) ? 'button button--checked' : 'button'}\r\n                name={it.name}\r\n                key={it.id}\r\n                type=\"button\"\r\n                onClick={handler}\r\n                disabled={items.find(item => item.categoryName === it.name) ? false : true}\r\n              >\r\n                {it.name}\r\n              </button>\r\n            )\r\n          })}\r\n        </fieldset>\r\n        <fieldset className=\"options__block\">\r\n          <legend className=\"legend\">Status</legend>\r\n          <label className=\"check-box__label\" htmlFor=\"is_limited\">\r\n            <span className=\"check-box__sqr\">{filter.isLimited && <img src={check} />}</span>\r\n            Limited\r\n          </label>\r\n          <input\r\n            className=\"check-box\"\r\n            id=\"is_limited\"\r\n            type=\"checkbox\"\r\n            onChange={isLimitedHandler}\r\n            checked={filter.isLimited}\r\n          />\r\n          <label className=\"check-box__label\" htmlFor=\"is_new\">\r\n            <span className=\"check-box__sqr\">{filter.isNew && <img src={check} />}</span>\r\n            New\r\n          </label>\r\n          <input className=\"check-box\" id=\"is_new\" type=\"checkbox\" onChange={isNewHandler} checked={filter.isNew} />\r\n        </fieldset>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filters\r\n","import React from 'react'\nimport styles from './ProductList.module.scss'\nimport { useProductList } from './useProductList'\nimport Header from './Header/Header'\nimport ProductCards from './ProductCards/ProductCards'\nimport Error from './Error/Error'\nimport Filters from './Filters/Filters'\n\nconst ProductList = () => {\n  const { items, filter, status, categoryStatus, updateFilter, categories, resetFilter } = useProductList()\n  const handleFilterIsNewUpdate = () => updateFilter({ isNew: !filter.isNew })\n  const handleFilterIsLimitedUpdate = () => updateFilter({ isLimited: !filter.isLimited })\n  const handleFilterСategoryUpdate = e =>\n    updateFilter({\n      category: [...filter.category, ...Object.values(...categories.filter(it => it.name === e.target.name))],\n    })\n  const cleaningFilterCategories = () => updateFilter({ category: [] })\n  const handleSearchUpdate = e => {\n    updateFilter({ search: e.target.value })\n  }\n  const pageReloadHandler = () => resetFilter()\n  return (\n    <>\n      <Header handler={handleSearchUpdate} />\n      <div className={styles.root}>\n        <Filters\n          clearHandler={cleaningFilterCategories}\n          handler={handleFilterСategoryUpdate}\n          categories={categories}\n          isLimitedHandler={handleFilterIsLimitedUpdate}\n          isNewHandler={handleFilterIsNewUpdate}\n          items={items}\n          filter={filter}\n        />\n        {status === 'success' && categoryStatus === 'success' && <ProductCards items={items} />}\n        {(status === 'error' || categoryStatus === 'error') && <Error handler={pageReloadHandler} />}\n      </div>\n    </>\n  )\n}\n\nexport default ProductList\n","import ProductList from './components/ProductList'\n\nfunction App() {\n  return <ProductList />\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}